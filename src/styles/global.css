@import "tailwindcss";

/* ========== 主题色系统 ========== */
:root {
  /* 默认主题：琥珀金 */
  --theme-hue: 35;
  --theme-saturation: 60%;

  /* 基础色彩 */
  --color-bg: hsl(var(--theme-hue), 15%, 97%);
  --color-bg-secondary: hsl(var(--theme-hue), 12%, 94%);
  --color-text: hsl(var(--theme-hue), 20%, 20%);
  --color-text-secondary: hsl(var(--theme-hue), 15%, 45%);
  --color-accent: hsl(var(--theme-hue), var(--theme-saturation), 45%);
  --color-accent-light: hsl(var(--theme-hue), var(--theme-saturation), 55%);
  --color-accent-dark: hsl(var(--theme-hue), var(--theme-saturation), 35%);
  --color-border: hsl(var(--theme-hue), 15%, 88%);
  --color-shadow: hsla(var(--theme-hue), 30%, 20%, 0.08);
  --color-card: hsl(var(--theme-hue), 10%, 100%);
  --color-card-hover: hsl(var(--theme-hue), 15%, 98%);

  /* 功能色 */
  --color-success: hsl(145, 60%, 40%);
  --color-warning: hsl(40, 90%, 50%);
  --color-error: hsl(0, 70%, 55%);
  --color-info: hsl(210, 70%, 50%);

  /* 五行色系 */
  --color-metal: #b8c5d0;
  --color-wood: #7cb342;
  --color-water: #42a5f5;
  --color-fire: #ef5350;
  --color-earth: #d4a574;

  /* 阴阳 */
  --color-yang: #f5f5dc;
  --color-yin: #2f4f4f;

  /* 渐变 */
  --gradient-primary: linear-gradient(135deg, var(--color-accent), var(--color-accent-light));
  --gradient-card: linear-gradient(145deg, var(--color-card), var(--color-bg-secondary));
}

/* 深色主题 */
[data-theme="dark"] {
  --color-bg: hsl(var(--theme-hue), 15%, 10%);
  --color-bg-secondary: hsl(var(--theme-hue), 12%, 14%);
  --color-text: hsl(var(--theme-hue), 15%, 92%);
  --color-text-secondary: hsl(var(--theme-hue), 12%, 65%);
  --color-accent: hsl(var(--theme-hue), var(--theme-saturation), 55%);
  --color-accent-light: hsl(var(--theme-hue), var(--theme-saturation), 65%);
  --color-accent-dark: hsl(var(--theme-hue), var(--theme-saturation), 45%);
  --color-border: hsl(var(--theme-hue), 10%, 22%);
  --color-shadow: hsla(var(--theme-hue), 30%, 5%, 0.4);
  --color-card: hsl(var(--theme-hue), 12%, 16%);
  --color-card-hover: hsl(var(--theme-hue), 14%, 20%);

  --color-yang: #e8e4d4;
  --color-yin: #1a1a2e;
}

/* ========== 预设主题色 ========== */
/* 琥珀金 (默认) */
[data-color="amber"] {
  --theme-hue: 35;
  --theme-saturation: 60%;
}

/* 翡翠绿 */
[data-color="emerald"] {
  --theme-hue: 160;
  --theme-saturation: 50%;
}

/* 宝石蓝 */
[data-color="sapphire"] {
  --theme-hue: 220;
  --theme-saturation: 55%;
}

/* 玫瑰红 */
[data-color="rose"] {
  --theme-hue: 350;
  --theme-saturation: 55%;
}

/* 紫水晶 */
[data-color="amethyst"] {
  --theme-hue: 280;
  --theme-saturation: 50%;
}

/* 青瓷 */
[data-color="celadon"] {
  --theme-hue: 175;
  --theme-saturation: 40%;
}

/* 墨色 */
[data-color="ink"] {
  --theme-hue: 220;
  --theme-saturation: 15%;
}

/* 朱砂 */
[data-color="cinnabar"] {
  --theme-hue: 5;
  --theme-saturation: 65%;
}

/* ========== VS Code 风格主题 ========== */
/* Moonlight */
[data-color="moonlight"] {
  --color-bg: #1e1c2a;
  --color-bg-secondary: #242033;
  --color-text: #e9e6f5;
  --color-text-secondary: #b4b0d6;
  --color-accent: #c099ff;
  --color-accent-light: #d6b9ff;
  --color-accent-dark: #9b7ad6;
  --color-border: #2f2b43;
  --color-shadow: rgba(10, 8, 18, 0.55);
  --color-card: #231f33;
  --color-card-hover: #2a2540;
  --color-success: #8bd5a5;
  --color-warning: #f2c17d;
  --color-error: #ff8fa3;
  --color-info: #8ecbff;
  --color-yang: #f3f0ff;
  --color-yin: #2a2740;
  --gradient-primary: linear-gradient(135deg, #c099ff, #7ecbff);
  --gradient-card: linear-gradient(145deg, #231f33, #2b2641);
}

[data-theme="light"][data-color="moonlight"] {
  --color-bg: #f6f4ff;
  --color-bg-secondary: #ebe7fb;
  --color-text: #2b2540;
  --color-text-secondary: #5d547d;
  --color-accent: #7b5bd6;
  --color-accent-light: #9a7cff;
  --color-accent-dark: #5a3fb0;
  --color-border: #d9d2f2;
  --color-shadow: rgba(82, 66, 140, 0.2);
  --color-card: #ffffff;
  --color-card-hover: #f3f0ff;
  --color-yang: #fdfcff;
  --color-yin: #362c52;
  --gradient-primary: linear-gradient(135deg, #7b5bd6, #6db7ff);
  --gradient-card: linear-gradient(145deg, #ffffff, #f3f0ff);
}

/* Aura */
[data-color="aura"] {
  --color-bg: #1a1025;
  --color-bg-secondary: #221332;
  --color-text: #f2ecff;
  --color-text-secondary: #c3b4e8;
  --color-accent: #ff8ee3;
  --color-accent-light: #ffb3ef;
  --color-accent-dark: #d46bb7;
  --color-border: #2a1a3f;
  --color-shadow: rgba(12, 6, 20, 0.55);
  --color-card: #20122e;
  --color-card-hover: #29163a;
  --color-success: #7ce7b3;
  --color-warning: #ffcc7a;
  --color-error: #ff7aa6;
  --color-info: #8fd4ff;
  --color-yang: #f9f0ff;
  --color-yin: #2a153d;
  --gradient-primary: linear-gradient(135deg, #ff8ee3, #7aa2ff);
  --gradient-card: linear-gradient(145deg, #20122e, #2a163a);
}

[data-theme="light"][data-color="aura"] {
  --color-bg: #fbf6ff;
  --color-bg-secondary: #f1e9ff;
  --color-text: #2d1a3d;
  --color-text-secondary: #5c4a7a;
  --color-accent: #d26bd8;
  --color-accent-light: #f08bf0;
  --color-accent-dark: #a34bb0;
  --color-border: #e3d6f2;
  --color-shadow: rgba(112, 60, 140, 0.2);
  --color-card: #ffffff;
  --color-card-hover: #f6edff;
  --color-yang: #ffffff;
  --color-yin: #3a244d;
  --gradient-primary: linear-gradient(135deg, #d26bd8, #7aa2ff);
  --gradient-card: linear-gradient(145deg, #ffffff, #f6edff);
}

/* SynthWave 84 */
[data-color="synthwave84"] {
  --color-bg: #241136;
  --color-bg-secondary: #2d1744;
  --color-text: #fdf4ff;
  --color-text-secondary: #d7c3f4;
  --color-accent: #ff7ad9;
  --color-accent-light: #ff9fe7;
  --color-accent-dark: #d95fb7;
  --color-border: #3a2154;
  --color-shadow: rgba(10, 6, 18, 0.6);
  --color-card: #2a1440;
  --color-card-hover: #351a4f;
  --color-success: #7ef1c1;
  --color-warning: #ffd37a;
  --color-error: #ff6fa9;
  --color-info: #78d6ff;
  --color-yang: #fff0ff;
  --color-yin: #2c1842;
  --gradient-primary: linear-gradient(135deg, #ff7ad9, #7a7cff);
  --gradient-card: linear-gradient(145deg, #2a1440, #371a55);
}

[data-theme="light"][data-color="synthwave84"] {
  --color-bg: #fff7ff;
  --color-bg-secondary: #f5ecff;
  --color-text: #2b173a;
  --color-text-secondary: #5a4a76;
  --color-accent: #e85cc7;
  --color-accent-light: #ff85e0;
  --color-accent-dark: #b6419b;
  --color-border: #eadbf6;
  --color-shadow: rgba(120, 60, 160, 0.2);
  --color-card: #ffffff;
  --color-card-hover: #f7efff;
  --color-yang: #ffffff;
  --color-yin: #3a244d;
  --gradient-primary: linear-gradient(135deg, #e85cc7, #7a7cff);
  --gradient-card: linear-gradient(145deg, #ffffff, #f7efff);
}

/* ========== 基础样式 ========== */
* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: "Noto Serif SC", "Source Han Serif CN", Georgia, serif;
  background-color: var(--color-bg);
  color: var(--color-text);
  min-height: 100vh;
  transition: background-color 0.4s ease, color 0.4s ease;
  overflow-x: hidden;
}

/* ========== 背景模式 ========== */
[data-bg-mode="transparent"] body {
  background-color: transparent;
}

.site-bg {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
}

.site-bg .bg-track {
  position: absolute;
  inset: 0;
  display: flex;
  width: 200%;
  height: 100%;
  transform: translateX(0);
  will-change: transform;
}

.site-bg .bg-image {
  flex: 0 0 50%;
  height: 100%;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0.8;
  transition: filter 0.4s ease;
  /* transform: scale(1.02); */
  filter: blur(0.7px) brightness(0.9) contrast(1.1) saturate(1.2);
  pointer-events: none;
}

.bg-controls {
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 12px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.35);
  border: 1px solid rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(8px);
  z-index: 3;
  pointer-events: auto;
  color: #fff;
  font-size: 12px;
}

.bg-btn {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: none;
  background: rgba(255, 255, 255, 0.15);
  color: #fff;
  cursor: pointer;
  transition: background 0.2s ease, transform 0.2s ease;
  pointer-events: auto;
}

.bg-btn:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: translateY(-1px);
}

.bg-btn-left,
.bg-btn-right {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  width: 36px;
  height: 36px;
  font-size: 18px;
  background: rgba(0, 0, 0, 0.35);
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(8px);
  z-index: 3;
  pointer-events: auto;
}

.bg-btn-left {
  left: 16px;
}
.bg-btn-right {
  right: 16px;
}

.bg-index {
  opacity: 0.85;
  font-variant-numeric: tabular-nums;
}

[data-bg-mode="solid"] .site-bg {
  display: none;
}

[data-bg-mode="solid"] .bg-controls,
[data-bg-mode="solid"] .bg-btn-left,
[data-bg-mode="solid"] .bg-btn-right {
  display: none;
}

/* 让内容层在背景之上 */
.min-h-screen {
  position: relative;
  z-index: 1;
}

/* ========== 卡片基础样式 ========== */
.card {
  /* 半透明卡片：保留主题卡色，但允许背景透出，配合轻微模糊提升可读性 */
  background: color-mix(in oklab, var(--color-card) 68%, transparent);
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  border-radius: 16px;
  box-shadow: 0 4px 20px var(--color-shadow);
  border: 1px solid color-mix(in oklab, var(--color-border) 85%, transparent);
  transition: all 0.3s ease;
}

.card:hover {
  box-shadow: 0 8px 30px var(--color-shadow);
  /* 悬停时略微加深卡片颜色以提高对比 */
  background: color-mix(in oklab, var(--color-card) 84%, transparent);
}

/* ========== 滚动条样式 ========== */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: var(--color-bg-secondary);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb {
  background: var(--color-accent);
  border-radius: 3px;
  opacity: 0.6;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-accent-dark);
}

/* ========== 动画关键帧 ========== */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes scrollUp {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(-50%);
  }
}

@keyframes glow {
  0%,
  100% {
    filter: drop-shadow(0 0 5px currentColor);
  }
  50% {
    filter: drop-shadow(0 0 15px currentColor);
  }
}

/* ========== 工具类 ========== */
.animate-fade-in {
  animation: fadeIn 0.8s ease-out forwards;
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-rotate {
  animation: rotate 20s linear infinite;
}

.animate-pulse-soft {
  animation: pulse 2s ease-in-out infinite;
}

.animate-scroll-up {
  animation: scrollUp 30s linear infinite;
}

.animate-glow {
  animation: glow 2s ease-in-out infinite;
}

/* ========== 按钮样式 ========== */
.btn-primary {
  background: var(--gradient-primary);
  color: white;
  padding: 8px 20px;
  border-radius: 8px;
  font-weight: 500;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px var(--color-shadow);
  filter: brightness(11.0);
}

.btn-secondary {
  background: var(--color-bg-secondary);
  color: var(--color-text);
  padding: 8px 20px;
  border-radius: 8px;
  font-weight: 500;
  transition: all 0.3s ease;
  border: 1px solid var(--color-border);
  cursor: pointer;
}

.btn-secondary:hover {
  background: var(--color-card);
  border-color: var(--color-accent);
  color: var(--color-accent);
}

/* ========== 终端样式 ========== */
.terminal {
  font-family: "JetBrains Mono", "Fira Code", "Consolas", monospace;
  background: hsl(var(--theme-hue), 15%, 12%);
  border-radius: 12px;
  overflow: hidden;
}

[data-theme="dark"] .terminal {
  background: hsl(var(--theme-hue), 10%, 8%);
}

.terminal-header {
  background: hsl(var(--theme-hue), 12%, 18%);
  padding: 8px 12px;
  display: flex;
  gap: 6px;
}

.terminal-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

.terminal-content {
  padding: 16px;
  min-height: 200px;
  max-height: 300px;
  overflow-y: auto;
}

.terminal-line {
  color: #d4d4d4;
  line-height: 1.6;
}

.terminal-prompt {
  color: var(--color-accent-light);
}

.terminal-input {
  background: transparent;
  border: none;
  color: #d4d4d4;
  font-family: inherit;
  font-size: inherit;
  outline: none;
  width: calc(100% - 20px);
}

/* ========== 太极样式 ========== */
.taiji-container {
  position: relative;
  width: 200px;
  height: 200px;
  margin: 0 auto;
}

.taiji {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: linear-gradient(to right, var(--color-yang) 50%, var(--color-yin) 50%);
  position: relative;
  animation: rotate 20s linear infinite;
}

/* ========== 五行元素样式 ========== */
.wuxing-element {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: bold;
  position: absolute;
}

.wuxing-element:hover {
  transform: scale(1.1);
}

.wuxing-element.selected {
  transform: scale(1.2);
  box-shadow: 0 0 20px currentColor;
}

.wuxing-metal {
  background: linear-gradient(135deg, #e8e8e8, #a0a0a0);
  color: #4a4a4a;
}

.wuxing-wood {
  background: linear-gradient(135deg, #98d977, #4a7c23);
  color: #1a3a00;
}

.wuxing-water {
  background: linear-gradient(135deg, #6eb5ff, #1e5fa0);
  color: #001a40;
}

.wuxing-fire {
  background: linear-gradient(135deg, #ff7b7b, #b33030);
  color: #400000;
}

.wuxing-earth {
  background: linear-gradient(135deg, #e8c896, #a67c3c);
  color: #3d2800;
}

/* ========== 自动滚动容器 ========== */
.scroll-container {
  overflow: hidden;
  position: relative;
}

.scroll-container:hover .scroll-content {
  animation-play-state: paused;
}

.scroll-content {
  animation: scrollUp 30s linear infinite;
}

/* ========== 时间轴样式 ========== */
.timeline {
  position: relative;
  padding-left: 30px;
}

.timeline::before {
  content: "";
  position: absolute;
  left: 8px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--color-border);
}

.timeline-item {
  position: relative;
  padding-bottom: 24px;
}

.timeline-item::before {
  content: "";
  position: absolute;
  left: -26px;
  top: 4px;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--color-accent);
  border: 2px solid var(--color-card);
}

/* ========== 选项卡样式 ========== */
.tab-button {
  padding: 8px 20px;
  border-radius: 8px 8px 0 0;
  background: var(--color-bg-secondary);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
  border-bottom: none;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 500;
}

.tab-button:hover {
  background: var(--color-card);
  color: var(--color-text);
}

.tab-button.active {
  background: var(--color-card);
  color: var(--color-accent);
  border-bottom: 2px solid var(--color-card);
  margin-bottom: -1px;
}

.tab-content {
  display: none;
  animation: fadeIn 0.3s ease;
}

.tab-content.active {
  display: block;
}

/* ========== 融合效果样式 ========== */
.fusion-result {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  margin: 20px auto;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: bold;
  text-align: center;
  transition: all 0.5s ease;
}

.fusion-fire-wood {
  background: linear-gradient(45deg, #ff6b35, #2d5016, #ff6b35);
  background-size: 300% 300%;
  animation: gradient 3s ease infinite;
  color: #fff;
  box-shadow: 0 0 30px rgba(255, 107, 53, 0.5);
}

.fusion-water-metal {
  background: linear-gradient(135deg, #4a9eff, #c0c0c0, #4a9eff);
  background-size: 200% 200%;
  animation: gradient 2s ease infinite;
  color: #002855;
  box-shadow: 0 0 30px rgba(74, 158, 255, 0.5);
}

.fusion-earth-fire {
  background: linear-gradient(180deg, #8b4513, #ff4500, #8b4513);
  background-size: 100% 200%;
  animation: lava 2s ease infinite;
  color: #fff;
  box-shadow: 0 0 30px rgba(255, 69, 0, 0.5);
}

.fusion-sun-fire {
  background: radial-gradient(circle, #fff, #ffcc00, #ff6600);
  color: #4a2800;
  box-shadow: 0 0 50px rgba(255, 204, 0, 0.8);
  animation: glow 1.5s ease infinite;
}

.fusion-moon-water {
  background: radial-gradient(circle, #e6f3ff, #4a9eff, #1a1a40);
  color: #e6f3ff;
  box-shadow: 0 0 40px rgba(74, 158, 255, 0.6);
  animation: pulse 2s ease infinite;
}

@keyframes gradient {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

@keyframes lava {
  0%,
  100% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 0% 100%;
  }
}

/* ========== 侧边栏样式 ========== */
.sidebar {
  position: sticky;
  top: 80px;
  height: calc(100vh - 100px);
  overflow-y: auto;
}

.sidebar::-webkit-scrollbar {
  width: 4px;
}

/* ========== 导航链接样式 ========== */
.nav-link {
  color: var(--color-text-secondary);
  padding: 6px 12px;
  border-radius: 6px;
  transition: all 0.3s ease;
  font-size: 14px;
}

.nav-link:hover {
  color: var(--color-accent);
  background: var(--color-bg-secondary);
}

.nav-link.active {
  color: var(--color-accent);
  background: hsla(var(--theme-hue), var(--theme-saturation), 50%, 0.1);
}

/* ========== 个人信息卡片 ========== */
.profile-card {
  position: relative;
  overflow: hidden;
  border-radius: 16px;
}

.profile-bg {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  opacity: 0.3;
  filter: blur(1px);
}

.profile-content {
  position: relative;
  z-index: 1;
}

.avatar-ring {
  padding: 3px;
  background: var(--gradient-primary);
  border-radius: 50%;
  display: inline-block;
}

/* ========== 主题选择器 ========== */
.theme-color-btn {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.3s ease;
}

.theme-color-btn:hover {
  transform: scale(1.15);
}

.theme-color-btn.active {
  border-color: var(--color-text);
  box-shadow: 0 0 10px var(--color-shadow);
}

/* ========== 响应式布局 ========== */
@media (max-width: 1280px) {
  .sidebar {
    position: relative;
    top: 0;
    height: auto;
  }
}

@media (max-width: 1024px) {
  .main-layout {
    flex-direction: column;
  }

  .left-sidebar,
  .right-sidebar {
    width: 100%;
    position: relative;
    top: 0;
    height: auto;
  }
}

@media (max-width: 768px) {
  .taiji-container {
    width: 150px;
    height: 150px;
  }

  .wuxing-element {
    width: 40px;
    height: 40px;
    font-size: 12px;
  }
}
