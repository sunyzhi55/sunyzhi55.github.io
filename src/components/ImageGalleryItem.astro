---
// ImageGalleryItem 组件 - 单个图片展示卡片
interface Props {
  src: string;
  title: string;
  index: number;
}

const { src, title, index } = Astro.props;
---

<div class="gallery-item" data-gallery-index={index}>
  <div class="image-wrapper">
    <img src={src} alt={title} loading="lazy" />
    <div class="image-overlay">
      <div class="overlay-actions">
        <button class="action-btn zoom-btn" aria-label="放大查看" title="放大查看">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
            <path d="M11 8v6M8 11h6"/>
          </svg>
        </button>
        <a class="action-btn download-btn" href={src} download={title} aria-label="下载图片" title="下载图片">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7,10 12,15 17,10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
        </a>
      </div>
    </div>
  </div>
  <p class="image-title">{title}</p>
</div>

<style>
  .gallery-item {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .image-wrapper {
    position: relative;
    aspect-ratio: 1;
    border-radius: 10px;
    overflow: hidden;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .image-wrapper:hover {
    border-color: var(--color-accent);
    box-shadow: 0 4px 20px var(--color-shadow);
    transform: translateY(-2px);
  }

  .image-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .image-wrapper:hover img {
    transform: scale(1.1);
  }

  .image-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent 60%);
    opacity: 0;
    transition: opacity 0.3s ease;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    padding: 12px;
  }

  .image-wrapper:hover .image-overlay {
    opacity: 1;
  }

  .overlay-actions {
    display: flex;
    gap: 8px;
  }

  .action-btn {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.95);
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    color: var(--color-text);
    text-decoration: none;
  }

  .action-btn:hover {
    background: var(--color-accent);
    color: white;
    transform: scale(1.1);
  }

  .action-btn svg {
    width: 18px;
    height: 18px;
  }

  .image-title {
    font-size: 11px;
    color: var(--color-text-secondary);
    margin: 0;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
</style>
